<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign In or Create Account</title>
</head>
<body>
    <form id="signInForm">
    <h1>Sign In</h1>
        <label for="username">Email:</label><br>
        <input type="text" id="username" name="username" required><br>
        <label for="password">Password:</label><br>
        <input type="password" id="password" name="password" required><br><br>
        <button type="button" onclick="signIn()">Sign In</button>
        <p>Don't have an account? <a href="#" onclick="showCreateAccountForm()">Create a new account</a>.</p>
    </form>
    
    
    <form id="createAccountForm" style="display: none;">
    <h1>Create a New Account</h1>
        <label for="newUsername">Choose an email:</label><br>
        <input type="text" id="newUsername" name="newUsername" required><br>
        <label for="newPassword">Choose a Password:</label><br>
        <input type="password" id="newPassword" name="newPassword" required><br><br>
        <button type="button" onclick="createAccount()">Create Account</button>
    <p>Already have an account?<a href="#" onclick="showSignInForm()">Back to Sign In page</a></p>
    </form>

    <div id="message"></div>

    <script>
        document.getElementById("password").addEventListener('keyup', function(event) {
      if (event.key === 'Enter') {
        signIn();
      }
    });

    document.getElementById("newPassword").addEventListener('keyup', function(event) {
      if (event.key === 'Enter') {
        createAccount();
      }
    });
        function signIn() {
            var username = document.getElementById("username").value;
            var password = document.getElementById("password").value;
            var newUsername = document.getElementById("newUsername").value;
            var newPassword = document.getElementById("newPassword").value;
            // Here you would typically authenticate user's credentials.
            // For simplicity, let's assume there's a hardcoded username and password.
            if (username === newUsername && password === newPassword && validEmail(newUsername) && containsSpecialChars(newPassword) && newPassword.length >= 8) {
                showMessage("success", "Successfully signed in!");
                window.location.href = "index.html";
            } else {
                showMessage("error", "Invalid username or password. Please try again.");
            }
        }

        function validEmail(newUsername){
            return (newUsername.toLowerCase().includes("@gmail.com") || newUsername.toLowerCase().includes("@hotmail.com"));
        }
        function containsSpecialChars(password) {
            var specialChars = "!@#$%^&*()-_=+[]{};:,.<>?";
            var count = 0;
            for (var i = 0; i < password.length; i++) {
                if (specialChars.includes(password[i])) {
                    count++;
                    if (count >= 1) {
                        return true;
                    }
                }
            }
            return false;
        }

        function createAccount() {
            var newUsername = document.getElementById("newUsername").value;
            var newPassword = document.getElementById("newPassword").value;
            var isSuccess = true;
            var outputMessage = "";
            var isValidEmail = validEmail(newUsername);
            var hasSpecialChars = containsSpecialChars(newPassword);
            if(isValidEmail && newPassword.length >= 8 && hasSpecialChars){
                        //console.log("New Username: " + newUsername);
                        //console.log("New Password: " + newPassword);
            
                        showMessage("success", "Account created successfully!");
                        showSignInForm();
                        return;
            }
            if(!isValidEmail){
                outputMessage += "Error: Email is invalid.<br>";
            }
            if(newPassword.length < 8){
                outputMessage += "Error: Password must contain at least 8 characters.<br>";
            }
            if(!hasSpecialChars){
                        outputMessage += "Error: Password must contain at least one special character.<br>";
                        //showMessage("failure", "Error: Password must contain at least one special character.");
            }
                //else{
                    
                    //showMessage("failure", "Error: Password must contain at least 8 characters.");
                //}
            
            //else{
                //outputMessage += "Error: username must be a valid email address.\n";
                //showMessage("failure", "Error: username must be a valid email address.");
            //}
            showMessage("failure", outputMessage);
            console.log(outputMessage);
        }
        function showSignInForm(){
            document.getElementById("signInForm").style.display = "block";
            document.getElementById("createAccountForm").style.display = "none";
            document.getElementById("message").innerHTML = "";
        }
        function showCreateAccountForm() {
            document.getElementById("signInForm").style.display = "none";
            document.getElementById("createAccountForm").style.display = "block";
            document.getElementById("message").innerHTML = "";
        }

        function showMessage(type, message) {
            document.getElementById("message").innerHTML = "<p style='color: " + (type === "success" ? "green" : "red") + "'>" + message + "</p>";
        }
    </script>
</body>
</html>